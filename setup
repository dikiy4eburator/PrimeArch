#!/bin/sh

# ////////////////////////////////////////////////////////////
# //////////////////    VARIABELS DEFINITION    //////////////
# ////////////////////////////////////////////////////////////

# set Variabels
BoxWhith=70
consol_X=$(tput cols)
consol_Y=$(tput lines)
BoxStartX=$(( ($consol_X - $BoxWhith)/2  ))
BoxStartY=3

working_dir=$(pwd)


# includes
source $working_dir/lib/funktions/user_ops
source $working_dir/lib/funktions/menu_generator
source $working_dir/lib/funktions/auto_partition
source $working_dir/lib/funktions/manual_partition
source $working_dir/lib/funktions/MKSWAP
source $working_dir/lib/funktions/install_pacages
source $working_dir/lib/funktions/time_setup
source $working_dir/lib/funktions/language_install


source $working_dir/lib/zfs_install
source $working_dir/lib/normal_install


# /////////////////////////////////////////////////////////////
# //////////////////    START INSTALATION   ///////////////////
# /////////////////////////////////////////////////////////////



# language select
#===============================================================================

dialog \
--backtitle 'PrimeArch Installer' \
--begin $BoxStartY $BoxStartX \
--menu "Select your languge" 12 $BoxWhith 3 \
	1 English \
	2 German \
	3 Russian \
	2>/tmp/language

case $(</tmp/language) in
		1 )
			loadkeys en ;;
		2 )
			loadkeys de ;;
		3 )
			loadkeys ru ;;
esac
#===============================================================================


# SELECT INSTALL MODE
#===============================================================================
dialog \
--backtitle 'PrimeArch Installer' \
--title 'Partitionierung' \
--begin $BoxStartY $BoxStartX \
--menu "\nWhat kind of installation you want?\n" 12 $BoxWhith 3 \
	1 "Normal installation" \
	2 "ROOT ON ZFS" \
	2>/tmp/installation

case $(</tmp/installation) in
	1 )
		f_normal ;;

	2 )
		f_zfs ;;
esac
#===============================================================================



dialog \
--backtitle 'PrimeArch Installer' \
--begin $BoxStartY $BoxStartX \
--msgbox "Setup is DON" 12 $BoxWhith \

exit
