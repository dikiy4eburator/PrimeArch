#!/bin/bash

# --------------------------------------------------
# "PARTITIONIEREN WENN BENÖTIGT"
# cgdisk
#
# efi = ef00
# swap = 8200
# linux = 8300
 
# "FORMATIEREN WENN BENÖTIGT"
# z.B :
#    mkfs.fat -F32 /dev/…
#    mkfs.btrfs /dev/...
#    mkswap /dev/...
#    mkfs.ext4 /dev/...
# 
# -------------------------------------------------
# mount -o umask=0077 /dev/…  /mnt/boot
# mount -o defaults,noatime,discard /dev/… /mnt
# mount -o defaults,noatime,discard /dev/… /mnt/home
# swapon /dev/...
# --------------------------------------------------------------

loadkeys de-latin1

read -p "Bitte Festplatte angeben: " HDD

# formating partitions
mkfs.fat -F32 /dev/$HDD + 1
mkswap /dev/$HDD + 2
mkfs.ext4 /dev/$HDD + 3

# Mounting partitions
mount /dev/$HDD + 3 /mnt
mkdir /mnt/boot
mkdir /mnt/boot/efi
mount /dev/$HDD + 1 /mnt/boot/efi
swapon /dev/$HDD + 2

# Install base pacages
pacstrap -i /mnt base base-devel grub os-prober efibootmgr vim zsh linux-headers

# Generate fstab
genfstab -U -p /mnt  >> /mnt/etc/fstab
 
arch-chroot /mnt

